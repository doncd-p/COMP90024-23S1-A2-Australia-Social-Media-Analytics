{"ast":null,"code":"var logError = require(\"../core/log\");\nvar vmlCore = require(\"./core\");\nvar _util = require(\"../core/util\");\nvar each = _util.each;\n\n/**\n * VML Painter.\n *\n * @module zrender/vml/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n/**\n * @alias module:zrender/vml/Painter\n */\n\nfunction VMLPainter(root, storage) {\n  vmlCore.initVML();\n  this.root = root;\n  this.storage = storage;\n  var vmlViewport = document.createElement('div');\n  var vmlRoot = document.createElement('div');\n  vmlViewport.style.cssText = 'display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';\n  vmlRoot.style.cssText = 'position:absolute;left:0;top:0;';\n  root.appendChild(vmlViewport);\n  this._vmlRoot = vmlRoot;\n  this._vmlViewport = vmlViewport;\n  this.resize(); // Modify storage\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    if (el) {\n      el.onRemove && el.onRemove(vmlRoot);\n    }\n  };\n  storage.addToStorage = function (el) {\n    // Displayable already has a vml node\n    el.onAdd && el.onAdd(vmlRoot);\n    oldAddToStorage.call(storage, el);\n  };\n  this._firstPaint = true;\n}\nVMLPainter.prototype = {\n  constructor: VMLPainter,\n  getType: function () {\n    return 'vml';\n  },\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._vmlViewport;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n  /**\n   * 刷新\n   */\n  refresh: function () {\n    var list = this.storage.getDisplayList(true, true);\n    this._paintList(list);\n  },\n  _paintList: function (list) {\n    var vmlRoot = this._vmlRoot;\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n      if (el.invisible || el.ignore) {\n        if (!el.__alreadyNotVisible) {\n          el.onRemove(vmlRoot);\n        } // Set as already invisible\n\n        el.__alreadyNotVisible = true;\n      } else {\n        if (el.__alreadyNotVisible) {\n          el.onAdd(vmlRoot);\n        }\n        el.__alreadyNotVisible = false;\n        if (el.__dirty) {\n          el.beforeBrush && el.beforeBrush();\n          (el.brushVML || el.brush).call(el, vmlRoot);\n          el.afterBrush && el.afterBrush();\n        }\n      }\n      el.__dirty = false;\n    }\n    if (this._firstPaint) {\n      // Detached from document at first time\n      // to avoid page refreshing too many times\n      // FIXME 如果每次都先 removeChild 可能会导致一些填充和描边的效果改变\n      this._vmlViewport.appendChild(vmlRoot);\n      this._firstPaint = false;\n    }\n  },\n  resize: function (width, height) {\n    var width = width == null ? this._getWidth() : width;\n    var height = height == null ? this._getHeight() : height;\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var vmlViewportStyle = this._vmlViewport.style;\n      vmlViewportStyle.width = width + 'px';\n      vmlViewportStyle.height = height + 'px';\n    }\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._vmlRoot = this._vmlViewport = this.storage = null;\n  },\n  getWidth: function () {\n    return this._width;\n  },\n  getHeight: function () {\n    return this._height;\n  },\n  clear: function () {\n    if (this._vmlViewport) {\n      this.root.removeChild(this._vmlViewport);\n    }\n  },\n  _getWidth: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientWidth || parseInt10(stl.width)) - parseInt10(stl.paddingLeft) - parseInt10(stl.paddingRight) | 0;\n  },\n  _getHeight: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientHeight || parseInt10(stl.height)) - parseInt10(stl.paddingTop) - parseInt10(stl.paddingBottom) | 0;\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    logError('In IE8.0 VML mode painter not support method \"' + method + '\"');\n  };\n} // Unsupported methods\n\neach(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (name) {\n  VMLPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = VMLPainter;\nmodule.exports = _default;","map":{"version":3,"names":["logError","require","vmlCore","_util","each","parseInt10","val","parseInt","VMLPainter","root","storage","initVML","vmlViewport","document","createElement","vmlRoot","style","cssText","appendChild","_vmlRoot","_vmlViewport","resize","oldDelFromStorage","delFromStorage","oldAddToStorage","addToStorage","el","call","onRemove","onAdd","_firstPaint","prototype","constructor","getType","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","refresh","list","getDisplayList","_paintList","i","length","invisible","ignore","__alreadyNotVisible","__dirty","beforeBrush","brushVML","brush","afterBrush","width","height","_getWidth","_getHeight","_width","_height","vmlViewportStyle","dispose","innerHTML","getWidth","getHeight","clear","removeChild","stl","currentStyle","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","createMethodNotSupport","method","name","_default","module","exports"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc_assign2/node_modules/zrender/lib/vml/Painter.js"],"sourcesContent":["var logError = require(\"../core/log\");\n\nvar vmlCore = require(\"./core\");\n\nvar _util = require(\"../core/util\");\n\nvar each = _util.each;\n\n/**\n * VML Painter.\n *\n * @module zrender/vml/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n/**\n * @alias module:zrender/vml/Painter\n */\n\n\nfunction VMLPainter(root, storage) {\n  vmlCore.initVML();\n  this.root = root;\n  this.storage = storage;\n  var vmlViewport = document.createElement('div');\n  var vmlRoot = document.createElement('div');\n  vmlViewport.style.cssText = 'display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';\n  vmlRoot.style.cssText = 'position:absolute;left:0;top:0;';\n  root.appendChild(vmlViewport);\n  this._vmlRoot = vmlRoot;\n  this._vmlViewport = vmlViewport;\n  this.resize(); // Modify storage\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n\n    if (el) {\n      el.onRemove && el.onRemove(vmlRoot);\n    }\n  };\n\n  storage.addToStorage = function (el) {\n    // Displayable already has a vml node\n    el.onAdd && el.onAdd(vmlRoot);\n    oldAddToStorage.call(storage, el);\n  };\n\n  this._firstPaint = true;\n}\n\nVMLPainter.prototype = {\n  constructor: VMLPainter,\n  getType: function () {\n    return 'vml';\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._vmlViewport;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * 刷新\n   */\n  refresh: function () {\n    var list = this.storage.getDisplayList(true, true);\n\n    this._paintList(list);\n  },\n  _paintList: function (list) {\n    var vmlRoot = this._vmlRoot;\n\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n\n      if (el.invisible || el.ignore) {\n        if (!el.__alreadyNotVisible) {\n          el.onRemove(vmlRoot);\n        } // Set as already invisible\n\n\n        el.__alreadyNotVisible = true;\n      } else {\n        if (el.__alreadyNotVisible) {\n          el.onAdd(vmlRoot);\n        }\n\n        el.__alreadyNotVisible = false;\n\n        if (el.__dirty) {\n          el.beforeBrush && el.beforeBrush();\n          (el.brushVML || el.brush).call(el, vmlRoot);\n          el.afterBrush && el.afterBrush();\n        }\n      }\n\n      el.__dirty = false;\n    }\n\n    if (this._firstPaint) {\n      // Detached from document at first time\n      // to avoid page refreshing too many times\n      // FIXME 如果每次都先 removeChild 可能会导致一些填充和描边的效果改变\n      this._vmlViewport.appendChild(vmlRoot);\n\n      this._firstPaint = false;\n    }\n  },\n  resize: function (width, height) {\n    var width = width == null ? this._getWidth() : width;\n    var height = height == null ? this._getHeight() : height;\n\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var vmlViewportStyle = this._vmlViewport.style;\n      vmlViewportStyle.width = width + 'px';\n      vmlViewportStyle.height = height + 'px';\n    }\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._vmlRoot = this._vmlViewport = this.storage = null;\n  },\n  getWidth: function () {\n    return this._width;\n  },\n  getHeight: function () {\n    return this._height;\n  },\n  clear: function () {\n    if (this._vmlViewport) {\n      this.root.removeChild(this._vmlViewport);\n    }\n  },\n  _getWidth: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientWidth || parseInt10(stl.width)) - parseInt10(stl.paddingLeft) - parseInt10(stl.paddingRight) | 0;\n  },\n  _getHeight: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientHeight || parseInt10(stl.height)) - parseInt10(stl.paddingTop) - parseInt10(stl.paddingBottom) | 0;\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    logError('In IE8.0 VML mode painter not support method \"' + method + '\"');\n  };\n} // Unsupported methods\n\n\neach(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (name) {\n  VMLPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = VMLPainter;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}