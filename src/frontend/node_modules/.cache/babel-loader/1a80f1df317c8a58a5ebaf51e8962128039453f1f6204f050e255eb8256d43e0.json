{"ast":null,"code":"require(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.join.js\");\nrequire(\"core-js/modules/es.array.sort.js\");\nvar Clip = require(\"./Clip\");\nvar color = require(\"../tool/color\");\nvar _util = require(\"../core/util\");\nvar isArrayLike = _util.isArrayLike;\n\n/**\n * @module echarts/animation/Animator\n */\nvar arraySlice = Array.prototype.slice;\nfunction defaultGetter(target, key) {\n  return target[key];\n}\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n/**\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} percent\n * @return {number}\n */\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * @param  {string} p0\n * @param  {string} p1\n * @param  {number} percent\n * @return {string}\n */\n\nfunction interpolateString(p0, p1, percent) {\n  return percent > 0.5 ? p1 : p0;\n}\n/**\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {number} percent\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n  var len = p0.length;\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n  } else {\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n  }\n} // arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\n\nfunction fillArr(arr0, arr1, arrDim) {\n  var arr0Len = arr0.length;\n  var arr1Len = arr1.length;\n  if (arr0Len !== arr1Len) {\n    // FIXME Not work for TypedArray\n    var isPreviousLarger = arr0Len > arr1Len;\n    if (isPreviousLarger) {\n      // Cut the previous\n      arr0.length = arr1Len;\n    } else {\n      // Fill the previous\n      for (var i = arr0Len; i < arr1Len; i++) {\n        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n      }\n    }\n  } // Handling NaN value\n\n  var len2 = arr0[0] && arr0[0].length;\n  for (var i = 0; i < arr0.length; i++) {\n    if (arrDim === 1) {\n      if (isNaN(arr0[i])) {\n        arr0[i] = arr1[i];\n      }\n    } else {\n      for (var j = 0; j < len2; j++) {\n        if (isNaN(arr0[i][j])) {\n          arr0[i][j] = arr1[i][j];\n        }\n      }\n    }\n  }\n}\n/**\n * @param  {Array} arr0\n * @param  {Array} arr1\n * @param  {number} arrDim\n * @return {boolean}\n */\n\nfunction isArraySame(arr0, arr1, arrDim) {\n  if (arr0 === arr1) {\n    return true;\n  }\n  var len = arr0.length;\n  if (len !== arr1.length) {\n    return false;\n  }\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n  } else {\n    var len2 = arr0[0].length;\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        if (arr0[i][j] !== arr1[i][j]) {\n          return false;\n        }\n      }\n    }\n  }\n  return true;\n}\n/**\n * Catmull Rom interpolate array\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {Array} p2\n * @param  {Array} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\nfunction catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {\n  var len = p0.length;\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n  } else {\n    var len2 = p0[0].length;\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n      }\n    }\n  }\n}\n/**\n * Catmull Rom interpolate number\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @return {number}\n */\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\nfunction cloneValue(value) {\n  if (isArrayLike(value)) {\n    var len = value.length;\n    if (isArrayLike(value[0])) {\n      var ret = [];\n      for (var i = 0; i < len; i++) {\n        ret.push(arraySlice.call(value[i]));\n      }\n      return ret;\n    }\n    return arraySlice.call(value);\n  }\n  return value;\n}\nfunction rgba2String(rgba) {\n  rgba[0] = Math.floor(rgba[0]);\n  rgba[1] = Math.floor(rgba[1]);\n  rgba[2] = Math.floor(rgba[2]);\n  return 'rgba(' + rgba.join(',') + ')';\n}\nfunction getArrayDim(keyframes) {\n  var lastValue = keyframes[keyframes.length - 1].value;\n  return isArrayLike(lastValue && lastValue[0]) ? 2 : 1;\n}\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  var getter = animator._getter;\n  var setter = animator._setter;\n  var useSpline = easing === 'spline';\n  var trackLen = keyframes.length;\n  if (!trackLen) {\n    return;\n  } // Guess data type\n\n  var firstVal = keyframes[0].value;\n  var isValueArray = isArrayLike(firstVal);\n  var isValueColor = false;\n  var isValueString = false; // For vertices morphing\n\n  var arrDim = isValueArray ? getArrayDim(keyframes) : 0;\n  var trackMaxTime; // Sort keyframe as ascending\n\n  keyframes.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe\n\n  var kfPercents = []; // Value of each keyframe\n\n  var kfValues = [];\n  var prevValue = keyframes[0].value;\n  var isAllValueEqual = true;\n  for (var i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime); // Assume value is a color when it is a string\n\n    var value = keyframes[i].value; // Check if value is equal, deep check if value is array\n\n    if (!(isValueArray && isArraySame(value, prevValue, arrDim) || !isValueArray && value === prevValue)) {\n      isAllValueEqual = false;\n    }\n    prevValue = value; // Try converting a string to a color array\n\n    if (typeof value === 'string') {\n      var colorArray = color.parse(value);\n      if (colorArray) {\n        value = colorArray;\n        isValueColor = true;\n      } else {\n        isValueString = true;\n      }\n    }\n    kfValues.push(value);\n  }\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n  var lastValue = kfValues[trackLen - 1]; // Polyfill array and NaN value\n\n  for (var i = 0; i < trackLen - 1; i++) {\n    if (isValueArray) {\n      fillArr(kfValues[i], lastValue, arrDim);\n    } else {\n      if (isNaN(kfValues[i]) && !isNaN(lastValue) && !isValueString && !isValueColor) {\n        kfValues[i] = lastValue;\n      }\n    }\n  }\n  isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim); // Cache the key of last frame to speed up when\n  // animation playback is sequency\n\n  var lastFrame = 0;\n  var lastFramePercent = 0;\n  var start;\n  var w;\n  var p0;\n  var p1;\n  var p2;\n  var p3;\n  if (isValueColor) {\n    var rgba = [0, 0, 0, 0];\n  }\n  var onframe = function onframe(target, percent) {\n    // Find the range keyframes\n    // kf1-----kf2---------current--------kf3\n    // find kf2 and kf3 and do interpolation\n    var frame; // In the easing function like elasticOut, percent may less than 0\n\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      // Start from next key\n      // PENDING start from lastFrame ?\n      start = Math.min(lastFrame + 1, trackLen - 1);\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n    lastFrame = frame;\n    lastFramePercent = percent;\n    var range = kfPercents[frame + 1] - kfPercents[frame];\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n    if (useSpline) {\n      p1 = kfValues[frame];\n      p0 = kfValues[frame === 0 ? frame : frame - 1];\n      p2 = kfValues[frame > trackLen - 2 ? trackLen - 1 : frame + 1];\n      p3 = kfValues[frame > trackLen - 3 ? trackLen - 1 : frame + 2];\n      if (isValueArray) {\n        catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);\n      } else {\n        var value;\n        if (isValueColor) {\n          value = catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(p1, p2, w);\n        } else {\n          value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n        }\n        setter(target, propName, value);\n      }\n    } else {\n      if (isValueArray) {\n        interpolateArray(kfValues[frame], kfValues[frame + 1], w, getter(target, propName), arrDim);\n      } else {\n        var value;\n        if (isValueColor) {\n          interpolateArray(kfValues[frame], kfValues[frame + 1], w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(kfValues[frame], kfValues[frame + 1], w);\n        } else {\n          value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n        }\n        setter(target, propName, value);\n      }\n    }\n  };\n  var clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n  if (easing && easing !== 'spline') {\n    clip.easing = easing;\n  }\n  return clip;\n}\n/**\n * @alias module:zrender/animation/Animator\n * @constructor\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n */\n\nvar Animator = function Animator(target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n  this._loop = loop || false;\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n  this._clipCount = 0;\n  this._delay = 0;\n  this._doneList = [];\n  this._onframeList = [];\n  this._clipList = [];\n};\nAnimator.prototype = {\n  /**\n   * Set Animation keyframe\n   * @param  {number} time 关键帧时间，单位是ms\n   * @param  {Object} props 关键帧的属性值，key-value表示\n   * @return {module:zrender/animation/Animator}\n   */\n  when: function when(time\n  /* ms */, props) {\n    var tracks = this._tracks;\n    for (var propName in props) {\n      if (!props.hasOwnProperty(propName)) {\n        continue;\n      }\n      if (!tracks[propName]) {\n        tracks[propName] = []; // Invalid value\n\n        var value = this._getter(this._target, propName);\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        } // If time is 0\n        //  Then props is given initialize value\n        // Else\n        //  Initialize value from current prop value\n\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: cloneValue(value)\n          });\n        }\n      }\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n    return this;\n  },\n  /**\n   * 添加动画每一帧的回调函数\n   * @param  {Function} callback\n   * @return {module:zrender/animation/Animator}\n   */\n  during: function during(callback) {\n    this._onframeList.push(callback);\n    return this;\n  },\n  pause: function pause() {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n    this._paused = true;\n  },\n  resume: function resume() {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n    this._paused = false;\n  },\n  isPaused: function isPaused() {\n    return !!this._paused;\n  },\n  _doneCallback: function _doneCallback() {\n    // Clear all tracks\n    this._tracks = {}; // Clear all clips\n\n    this._clipList.length = 0;\n    var doneList = this._doneList;\n    var len = doneList.length;\n    for (var i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n  /**\n   * Start the animation\n   * @param  {string|Function} [easing]\n   *         动画缓动函数，详见{@link module:zrender/animation/easing}\n   * @param  {boolean} forceAnimate\n   * @return {module:zrender/animation/Animator}\n   */\n  start: function start(easing, forceAnimate) {\n    var self = this;\n    var clipCount = 0;\n    var oneTrackDone = function oneTrackDone() {\n      clipCount--;\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n    var lastClip;\n    for (var propName in this._tracks) {\n      if (!this._tracks.hasOwnProperty(propName)) {\n        continue;\n      }\n      var clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n      if (clip) {\n        this._clipList.push(clip);\n        clipCount++; // If start after added to animation\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n        lastClip = clip;\n      }\n    } // Add during callback on the last clip\n\n    if (lastClip) {\n      var oldOnFrame = lastClip.onframe;\n      lastClip.onframe = function (target, percent) {\n        oldOnFrame(target, percent);\n        for (var i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    } // This optimization will help the case that in the upper application\n    // the view may be refreshed frequently, where animation will be\n    // called repeatly but nothing changed.\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n    return this;\n  },\n  /**\n   * Stop animation\n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stop: function stop(forwardToLast) {\n    var clipList = this._clipList;\n    var animation = this.animation;\n    for (var i = 0; i < clipList.length; i++) {\n      var clip = clipList[i];\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n      animation && animation.removeClip(clip);\n    }\n    clipList.length = 0;\n  },\n  /**\n   * Set when animation delay starts\n   * @param  {number} time 单位ms\n   * @return {module:zrender/animation/Animator}\n   */\n  delay: function delay(time) {\n    this._delay = time;\n    return this;\n  },\n  /**\n   * Add callback for animation end\n   * @param  {Function} cb\n   * @return {module:zrender/animation/Animator}\n   */\n  done: function done(cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n    return this;\n  },\n  /**\n   * @return {Array.<module:zrender/animation/Clip>}\n   */\n  getClips: function getClips() {\n    return this._clipList;\n  }\n};\nvar _default = Animator;\nmodule.exports = _default;","map":{"version":3,"names":["Clip","require","color","_util","isArrayLike","arraySlice","Array","prototype","slice","defaultGetter","target","key","defaultSetter","value","interpolateNumber","p0","p1","percent","interpolateString","interpolateArray","out","arrDim","len","length","i","len2","j","fillArr","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","push","call","isNaN","isArraySame","catmullRomInterpolateArray","p2","p3","t","t2","t3","catmullRomInterpolate","v0","v1","cloneValue","ret","rgba2String","rgba","Math","floor","join","getArrayDim","keyframes","lastValue","createTrackClip","animator","easing","oneTrackDone","propName","forceAnimate","getter","_getter","setter","_setter","useSpline","trackLen","firstVal","isValueArray","isValueColor","isValueString","trackMaxTime","sort","a","b","time","kfPercents","kfValues","prevValue","isAllValueEqual","colorArray","parse","_target","lastFrame","lastFramePercent","start","w","onframe","frame","min","range","clip","life","loop","_loop","delay","_delay","ondestroy","Animator","_tracks","_clipCount","_doneList","_onframeList","_clipList","when","props","tracks","hasOwnProperty","during","callback","pause","_paused","resume","isPaused","_doneCallback","doneList","self","clipCount","lastClip","animation","addClip","oldOnFrame","stop","forwardToLast","clipList","removeClip","done","cb","getClips","_default","module","exports"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc/COMP90024-23S1-A2-Australia-Social-Media-Analytics/src/frontend/node_modules/zrender/lib/animation/Animator.js"],"sourcesContent":["var Clip = require(\"./Clip\");\n\nvar color = require(\"../tool/color\");\n\nvar _util = require(\"../core/util\");\n\nvar isArrayLike = _util.isArrayLike;\n\n/**\n * @module echarts/animation/Animator\n */\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n  return target[key];\n}\n\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n/**\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} percent\n * @return {number}\n */\n\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * @param  {string} p0\n * @param  {string} p1\n * @param  {number} percent\n * @return {string}\n */\n\n\nfunction interpolateString(p0, p1, percent) {\n  return percent > 0.5 ? p1 : p0;\n}\n/**\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {number} percent\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n  } else {\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n  }\n} // arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\n\n\nfunction fillArr(arr0, arr1, arrDim) {\n  var arr0Len = arr0.length;\n  var arr1Len = arr1.length;\n\n  if (arr0Len !== arr1Len) {\n    // FIXME Not work for TypedArray\n    var isPreviousLarger = arr0Len > arr1Len;\n\n    if (isPreviousLarger) {\n      // Cut the previous\n      arr0.length = arr1Len;\n    } else {\n      // Fill the previous\n      for (var i = arr0Len; i < arr1Len; i++) {\n        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n      }\n    }\n  } // Handling NaN value\n\n\n  var len2 = arr0[0] && arr0[0].length;\n\n  for (var i = 0; i < arr0.length; i++) {\n    if (arrDim === 1) {\n      if (isNaN(arr0[i])) {\n        arr0[i] = arr1[i];\n      }\n    } else {\n      for (var j = 0; j < len2; j++) {\n        if (isNaN(arr0[i][j])) {\n          arr0[i][j] = arr1[i][j];\n        }\n      }\n    }\n  }\n}\n/**\n * @param  {Array} arr0\n * @param  {Array} arr1\n * @param  {number} arrDim\n * @return {boolean}\n */\n\n\nfunction isArraySame(arr0, arr1, arrDim) {\n  if (arr0 === arr1) {\n    return true;\n  }\n\n  var len = arr0.length;\n\n  if (len !== arr1.length) {\n    return false;\n  }\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n  } else {\n    var len2 = arr0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        if (arr0[i][j] !== arr1[i][j]) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * Catmull Rom interpolate array\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {Array} p2\n * @param  {Array} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n  } else {\n    var len2 = p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n      }\n    }\n  }\n}\n/**\n * Catmull Rom interpolate number\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @return {number}\n */\n\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n\nfunction cloneValue(value) {\n  if (isArrayLike(value)) {\n    var len = value.length;\n\n    if (isArrayLike(value[0])) {\n      var ret = [];\n\n      for (var i = 0; i < len; i++) {\n        ret.push(arraySlice.call(value[i]));\n      }\n\n      return ret;\n    }\n\n    return arraySlice.call(value);\n  }\n\n  return value;\n}\n\nfunction rgba2String(rgba) {\n  rgba[0] = Math.floor(rgba[0]);\n  rgba[1] = Math.floor(rgba[1]);\n  rgba[2] = Math.floor(rgba[2]);\n  return 'rgba(' + rgba.join(',') + ')';\n}\n\nfunction getArrayDim(keyframes) {\n  var lastValue = keyframes[keyframes.length - 1].value;\n  return isArrayLike(lastValue && lastValue[0]) ? 2 : 1;\n}\n\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  var getter = animator._getter;\n  var setter = animator._setter;\n  var useSpline = easing === 'spline';\n  var trackLen = keyframes.length;\n\n  if (!trackLen) {\n    return;\n  } // Guess data type\n\n\n  var firstVal = keyframes[0].value;\n  var isValueArray = isArrayLike(firstVal);\n  var isValueColor = false;\n  var isValueString = false; // For vertices morphing\n\n  var arrDim = isValueArray ? getArrayDim(keyframes) : 0;\n  var trackMaxTime; // Sort keyframe as ascending\n\n  keyframes.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe\n\n  var kfPercents = []; // Value of each keyframe\n\n  var kfValues = [];\n  var prevValue = keyframes[0].value;\n  var isAllValueEqual = true;\n\n  for (var i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime); // Assume value is a color when it is a string\n\n    var value = keyframes[i].value; // Check if value is equal, deep check if value is array\n\n    if (!(isValueArray && isArraySame(value, prevValue, arrDim) || !isValueArray && value === prevValue)) {\n      isAllValueEqual = false;\n    }\n\n    prevValue = value; // Try converting a string to a color array\n\n    if (typeof value === 'string') {\n      var colorArray = color.parse(value);\n\n      if (colorArray) {\n        value = colorArray;\n        isValueColor = true;\n      } else {\n        isValueString = true;\n      }\n    }\n\n    kfValues.push(value);\n  }\n\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n\n  var lastValue = kfValues[trackLen - 1]; // Polyfill array and NaN value\n\n  for (var i = 0; i < trackLen - 1; i++) {\n    if (isValueArray) {\n      fillArr(kfValues[i], lastValue, arrDim);\n    } else {\n      if (isNaN(kfValues[i]) && !isNaN(lastValue) && !isValueString && !isValueColor) {\n        kfValues[i] = lastValue;\n      }\n    }\n  }\n\n  isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim); // Cache the key of last frame to speed up when\n  // animation playback is sequency\n\n  var lastFrame = 0;\n  var lastFramePercent = 0;\n  var start;\n  var w;\n  var p0;\n  var p1;\n  var p2;\n  var p3;\n\n  if (isValueColor) {\n    var rgba = [0, 0, 0, 0];\n  }\n\n  var onframe = function (target, percent) {\n    // Find the range keyframes\n    // kf1-----kf2---------current--------kf3\n    // find kf2 and kf3 and do interpolation\n    var frame; // In the easing function like elasticOut, percent may less than 0\n\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      // Start from next key\n      // PENDING start from lastFrame ?\n      start = Math.min(lastFrame + 1, trackLen - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n\n    lastFrame = frame;\n    lastFramePercent = percent;\n    var range = kfPercents[frame + 1] - kfPercents[frame];\n\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n\n    if (useSpline) {\n      p1 = kfValues[frame];\n      p0 = kfValues[frame === 0 ? frame : frame - 1];\n      p2 = kfValues[frame > trackLen - 2 ? trackLen - 1 : frame + 1];\n      p3 = kfValues[frame > trackLen - 3 ? trackLen - 1 : frame + 2];\n\n      if (isValueArray) {\n        catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          value = catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(p1, p2, w);\n        } else {\n          value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n        }\n\n        setter(target, propName, value);\n      }\n    } else {\n      if (isValueArray) {\n        interpolateArray(kfValues[frame], kfValues[frame + 1], w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          interpolateArray(kfValues[frame], kfValues[frame + 1], w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(kfValues[frame], kfValues[frame + 1], w);\n        } else {\n          value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n        }\n\n        setter(target, propName, value);\n      }\n    }\n  };\n\n  var clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n\n  if (easing && easing !== 'spline') {\n    clip.easing = easing;\n  }\n\n  return clip;\n}\n/**\n * @alias module:zrender/animation/Animator\n * @constructor\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n */\n\n\nvar Animator = function (target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n  this._loop = loop || false;\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n  this._clipCount = 0;\n  this._delay = 0;\n  this._doneList = [];\n  this._onframeList = [];\n  this._clipList = [];\n};\n\nAnimator.prototype = {\n  /**\n   * Set Animation keyframe\n   * @param  {number} time 关键帧时间，单位是ms\n   * @param  {Object} props 关键帧的属性值，key-value表示\n   * @return {module:zrender/animation/Animator}\n   */\n  when: function (time\n  /* ms */\n  , props) {\n    var tracks = this._tracks;\n\n    for (var propName in props) {\n      if (!props.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      if (!tracks[propName]) {\n        tracks[propName] = []; // Invalid value\n\n        var value = this._getter(this._target, propName);\n\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        } // If time is 0\n        //  Then props is given initialize value\n        // Else\n        //  Initialize value from current prop value\n\n\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: cloneValue(value)\n          });\n        }\n      }\n\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n\n    return this;\n  },\n\n  /**\n   * 添加动画每一帧的回调函数\n   * @param  {Function} callback\n   * @return {module:zrender/animation/Animator}\n   */\n  during: function (callback) {\n    this._onframeList.push(callback);\n\n    return this;\n  },\n  pause: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n\n    this._paused = true;\n  },\n  resume: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n\n    this._paused = false;\n  },\n  isPaused: function () {\n    return !!this._paused;\n  },\n  _doneCallback: function () {\n    // Clear all tracks\n    this._tracks = {}; // Clear all clips\n\n    this._clipList.length = 0;\n    var doneList = this._doneList;\n    var len = doneList.length;\n\n    for (var i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n\n  /**\n   * Start the animation\n   * @param  {string|Function} [easing]\n   *         动画缓动函数，详见{@link module:zrender/animation/easing}\n   * @param  {boolean} forceAnimate\n   * @return {module:zrender/animation/Animator}\n   */\n  start: function (easing, forceAnimate) {\n    var self = this;\n    var clipCount = 0;\n\n    var oneTrackDone = function () {\n      clipCount--;\n\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n\n    var lastClip;\n\n    for (var propName in this._tracks) {\n      if (!this._tracks.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      var clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n\n      if (clip) {\n        this._clipList.push(clip);\n\n        clipCount++; // If start after added to animation\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        lastClip = clip;\n      }\n    } // Add during callback on the last clip\n\n\n    if (lastClip) {\n      var oldOnFrame = lastClip.onframe;\n\n      lastClip.onframe = function (target, percent) {\n        oldOnFrame(target, percent);\n\n        for (var i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    } // This optimization will help the case that in the upper application\n    // the view may be refreshed frequently, where animation will be\n    // called repeatly but nothing changed.\n\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n\n    return this;\n  },\n\n  /**\n   * Stop animation\n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stop: function (forwardToLast) {\n    var clipList = this._clipList;\n    var animation = this.animation;\n\n    for (var i = 0; i < clipList.length; i++) {\n      var clip = clipList[i];\n\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n\n      animation && animation.removeClip(clip);\n    }\n\n    clipList.length = 0;\n  },\n\n  /**\n   * Set when animation delay starts\n   * @param  {number} time 单位ms\n   * @return {module:zrender/animation/Animator}\n   */\n  delay: function (time) {\n    this._delay = time;\n    return this;\n  },\n\n  /**\n   * Add callback for animation end\n   * @param  {Function} cb\n   * @return {module:zrender/animation/Animator}\n   */\n  done: function (cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n\n    return this;\n  },\n\n  /**\n   * @return {Array.<module:zrender/animation/Clip>}\n   */\n  getClips: function () {\n    return this._clipList;\n  }\n};\nvar _default = Animator;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}