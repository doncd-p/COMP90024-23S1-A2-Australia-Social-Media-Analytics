{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\nvar lang = require(\"../lang\");\nvar _dataProvider = require(\"../data/helper/dataProvider\");\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n        var dataLabels = [];\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n    if (title && title.length) {\n      title = title[0];\n    }\n    return title && title.text;\n  }\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '自定义图';\n  }\n}\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","lang","_dataProvider","retrieveRawValue","_default","dom","ecModel","ariaModel","getModel","get","setAttribute","seriesCnt","eachSeries","seriesModel","idx","maxDataCnt","maxSeriesCnt","displaySeriesCnt","Math","min","ariaLabel","title","getTitle","replace","getConfig","seriesLabels","prefix","seriesCount","seriesLabel","seriesName","seriesTpl","seriesId","seriesIndex","seriesType","getSeriesTypeName","subType","data","getData","window","count","displayCnt","dataLabels","i","name","getName","value","push","join","str","keyValues","result","each","key","RegExp","path","userConfig","pathArr","split","aria","length","option","text","type","series","typeNames","module","exports"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc_assign2/node_modules/echarts/lib/visual/aria.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '自定义图';\n  }\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}