{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\nvar __DEV__ = _config.__DEV__;\nvar zrUtil = require(\"zrender/lib/core/util\");\nvar graphicUtil = require(\"../util/graphic\");\nvar _labelHelper = require(\"./helper/labelHelper\");\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\nvar createListFromArray = require(\"./helper/createListFromArray\");\nvar _barGrid = require(\"../layout/barGrid\");\nvar getLayoutOnAxis = _barGrid.getLayoutOnAxis;\nvar DataDiffer = require(\"../data/DataDiffer\");\nvar SeriesModel = require(\"../model/Series\");\nvar Model = require(\"../model/Model\");\nvar ChartView = require(\"../view/Chart\");\nvar _createClipPathFromCoordSys = require(\"./helper/createClipPathFromCoordSys\");\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CACHED_LABEL_STYLE_PROPERTIES = graphicUtil.CACHED_LABEL_STYLE_PROPERTIES;\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['emphasis', 'itemStyle'];\nvar LABEL_NORMAL = ['label'];\nvar LABEL_EMPHASIS = ['emphasis', 'label']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\nSeriesModel.extend({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    useTransform: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    // Only works on polar and cartesian2d coordinate system.\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n  },\n\n  /**\n   * @override\n   */\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  /**\n   * @override\n   */\n  getDataParams: function (dataIndex, dataType, el) {\n    var params = SeriesModel.prototype.getDataParams.apply(this, arguments);\n    el && (params.info = el.info);\n    return params;\n  }\n}); // -----\n// View\n// -----\n\nChartView.extend({\n  type: 'custom',\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api, payload) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api); // By default, merge mode is applied. In most cases, custom series is\n    // used in the scenario that data amount is not large but graphic elements\n    // is complicated, where merge mode is probably necessary for optimization.\n    // For example, reuse graphic elements and only update the transform when\n    // roam or data zoom according to `actionType`.\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdate(null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdate(el, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n  },\n  incrementalPrepareRender: function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  },\n  incrementalRender: function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.useHoverLayer = true;\n      }\n    }\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdate(null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      el.traverse(setIncrementalAndHoverLayer);\n    }\n  },\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop,\n  /**\n   * @override\n   */\n  filterForExposedEvent: function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n    while ((targetEl = targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n    return false;\n  }\n});\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    el.__customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    el = new Clz();\n  }\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot) {\n  var transitionProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (transitionProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (transitionProps.position = elOption.position.slice());\n  elOption.scale && (transitionProps.scale = elOption.scale.slice());\n  elOption.origin && (transitionProps.origin = elOption.origin.slice());\n  elOption.rotation && (transitionProps.rotation = elOption.rotation);\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n  if (isInit) {\n    el.attr(transitionProps);\n  } else {\n    graphicUtil.updateProps(el, transitionProps, animatableModel, dataIndex);\n  } // Merge by default.\n  // z2 must not be null/undefined, otherwise sort error may occur.\n\n  elOption.hasOwnProperty('z2') && el.attr('z2', elOption.z2 || 0);\n  elOption.hasOwnProperty('silent') && el.attr('silent', elOption.silent);\n  elOption.hasOwnProperty('invisible') && el.attr('invisible', elOption.invisible);\n  elOption.hasOwnProperty('ignore') && el.attr('ignore', elOption.ignore); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  elOption.hasOwnProperty('info') && el.attr('info', elOption.info); // If `elOption.styleEmphasis` is `false`, remove hover style. The\n  // logic is ensured by `graphicUtil.setElementHoverStyle`.\n\n  var styleEmphasis = elOption.styleEmphasis; // hoverStyle should always be set here, because if the hover style\n  // may already be changed, where the inner cache should be reset.\n\n  graphicUtil.setElementHoverStyle(el, styleEmphasis);\n  if (isRoot) {\n    graphicUtil.setAsHighDownDispatcher(el, styleEmphasis !== false);\n  }\n}\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currVisualColor;\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n    var labelModel = extra ? applyExtraBefore(extra, currLabelNormalModel) : currLabelNormalModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      autoColor: currVisualColor,\n      isRectText: true\n    });\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n    var labelModel = extra ? applyExtraBefore(extra, currLabelEmphasisModel) : currLabelEmphasisModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      isRectText: true\n    }, true);\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barMinWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, true);\n  el && data.setItemGraphicEl(dataIndex, el);\n  return el;\n}\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, isRoot) {\n  // [Rule]\n  // By default, follow merge mode.\n  //     (It probably brings benifit for performance in some cases of large data, where\n  //     user program can be optimized to that only updated props needed to be re-calculated,\n  //     or according to `actionType` some calculation can be skipped.)\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  var simplyRemove = !elOption; // `null`/`undefined`/`false`\n\n  elOption = elOption || {};\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  if (el && (simplyRemove // || elOption.$merge === false\n  // If `elOptionType` is `null`, follow the merge principle.\n  || elOptionType != null && elOptionType !== el.__customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== el.__customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== el.__customImagePath // FIXME test and remove this restriction?\n  || elOptionType === 'text' && hasOwn(elOptionShape, 'text') && elOptionStyle.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n  if (simplyRemove) {\n    return;\n  }\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot);\n  if (elOptionType === 'group') {\n    mergeChildren(el, dataIndex, elOption, animatableModel, data);\n  } // Always add whatever already added to ensure sequence.\n\n  group.add(el);\n  return el;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true` or replace\n// it by another element, where its `$merge` can be set as `true` if necessary.\n\nfunction mergeChildren(el, dataIndex, elOption, animatableModel, data) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n  if (byName) {\n    diffGroupChildren({\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      animatableModel: animatableModel,\n      group: el,\n      data: data\n    });\n    return;\n  }\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n  }\n}\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n} // `graphic#applyDefaultTextStyle` will cache\n// textFill, textStroke, textStrokeWidth.\n// We have to do this trick.\n\nfunction applyExtraBefore(extra, model) {\n  var dummyModel = new Model({}, model);\n  zrUtil.each(CACHED_LABEL_STYLE_PROPERTIES, function (stylePropName, modelPropName) {\n    if (extra.hasOwnProperty(stylePropName)) {\n      dummyModel.option[modelPropName] = extra[stylePropName];\n    }\n  });\n  return dummyModel;\n}\nfunction applyExtraAfter(itemStyle, extra) {\n  for (var key in extra) {\n    if (extra.hasOwnProperty(key) || !CACHED_LABEL_STYLE_PROPERTIES.hasOwnProperty(key)) {\n      itemStyle[key] = extra[key];\n    }\n  }\n}\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\nfunction hasOwnPathData(shape) {\n  return shape && (shape.hasOwnProperty('pathData') || shape.hasOwnProperty('d'));\n}\nfunction hasOwn(host, prop) {\n  return host && host.hasOwnProperty(prop);\n}","map":{"version":3,"names":["_config","require","__DEV__","zrUtil","graphicUtil","_labelHelper","getDefaultLabel","createListFromArray","_barGrid","getLayoutOnAxis","DataDiffer","SeriesModel","Model","ChartView","_createClipPathFromCoordSys","createClipPath","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","CACHED_LABEL_STYLE_PROPERTIES","ITEM_STYLE_NORMAL_PATH","ITEM_STYLE_EMPHASIS_PATH","LABEL_NORMAL","LABEL_EMPHASIS","GROUP_DIFF_PREFIX","prepareCustoms","cartesian2d","geo","singleAxis","polar","calendar","extend","type","dependencies","defaultOption","coordinateSystem","zlevel","z","legendHoverLink","useTransform","clip","getInitialData","option","ecModel","getSource","getDataParams","dataIndex","dataType","el","params","prototype","apply","arguments","info","_data","render","customSeries","api","payload","oldData","data","getData","group","renderItem","makeRenderItem","diff","add","newIdx","createOrUpdate","update","oldIdx","getItemGraphicEl","remove","execute","clipPath","get","setClipPath","removeClipPath","incrementalPrepareRender","removeAll","incrementalRender","setIncrementalAndHoverLayer","isGroup","incremental","useHoverLayer","idx","start","end","traverse","dispose","noop","filterForExposedEvent","eventType","query","targetEl","packedEvent","elementName","element","name","parent","createEl","elOption","graphicType","shape","pathRect","width","height","x","y","pathData","getPathData","makePath","layout","__customPathData","Image","__customImagePath","style","image","Text","__customText","text","Group","Error","Clz","getShapeClass","__customGraphicType","updateEl","animatableModel","isInit","isRoot","transitionProps","elOptionStyle","clone","position","slice","scale","origin","rotation","targetStyle","each","prop","prepareStyleTransition","hasOwnProperty","fill","textFill","stroke","textStroke","useStyle","opacity","targetOpacity","initProps","attr","updateProps","z2","silent","invisible","ignore","styleEmphasis","setElementHoverStyle","setAsHighDownDispatcher","oldElStyle","coordSys","prepareResult","userAPI","defaults","getWidth","getHeight","getZr","getDevicePixelRatio","value","visual","barLayout","currentSeriesIndices","font","userParams","context","seriesId","id","seriesName","seriesIndex","dataInsideLength","count","encode","wrapEncodeDef","currDataIndexInside","currDirty","currItemModel","currLabelNormalModel","currLabelEmphasisModel","currVisualColor","dataIndexInside","getRawIndex","actionType","updateCache","getItemModel","getModel","getItemVisual","dim","getDimension","extra","itemStyle","getItemStyle","labelModel","applyExtraBefore","setTextStyle","autoColor","isRectText","getShallow","retrieve2","getFormattedLabel","applyExtraAfter","retrieve3","visualType","opt","getBaseAxis","baseAxis","axis","getCurrentSeriesIndices","getFont","encodeDef","dimensions","dimName","dataDimIndex","dimInfo","getDimensionInfo","isExtraCoord","coordDim","dataDims","coordDimIndex","doCreateOrUpdate","setItemGraphicEl","simplyRemove","elOptionType","elOptionShape","hasOwnPathData","hasOwn","mergeChildren","newChildren","children","newLen","length","$mergeChildren","byName","diffChildrenByName","notMerge","diffGroupChildren","oldChildren","index","childAt","getKey","processAddUpdate","processRemove","item","newIndex","oldIndex","childOption","child","model","dummyModel","stylePropName","modelPropName","key","d","host"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc_assign2/node_modules/echarts/lib/chart/custom.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _labelHelper = require(\"./helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\nvar createListFromArray = require(\"./helper/createListFromArray\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar getLayoutOnAxis = _barGrid.getLayoutOnAxis;\n\nvar DataDiffer = require(\"../data/DataDiffer\");\n\nvar SeriesModel = require(\"../model/Series\");\n\nvar Model = require(\"../model/Model\");\n\nvar ChartView = require(\"../view/Chart\");\n\nvar _createClipPathFromCoordSys = require(\"./helper/createClipPathFromCoordSys\");\n\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\n\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\n\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\n\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\n\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\n\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CACHED_LABEL_STYLE_PROPERTIES = graphicUtil.CACHED_LABEL_STYLE_PROPERTIES;\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['emphasis', 'itemStyle'];\nvar LABEL_NORMAL = ['label'];\nvar LABEL_EMPHASIS = ['emphasis', 'label']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\nSeriesModel.extend({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    useTransform: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    // Only works on polar and cartesian2d coordinate system.\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n\n  },\n\n  /**\n   * @override\n   */\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n\n  /**\n   * @override\n   */\n  getDataParams: function (dataIndex, dataType, el) {\n    var params = SeriesModel.prototype.getDataParams.apply(this, arguments);\n    el && (params.info = el.info);\n    return params;\n  }\n}); // -----\n// View\n// -----\n\nChartView.extend({\n  type: 'custom',\n\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api, payload) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api); // By default, merge mode is applied. In most cases, custom series is\n    // used in the scenario that data amount is not large but graphic elements\n    // is complicated, where merge mode is probably necessary for optimization.\n    // For example, reuse graphic elements and only update the transform when\n    // roam or data zoom according to `actionType`.\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdate(null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdate(el, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  incrementalPrepareRender: function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  },\n  incrementalRender: function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.useHoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdate(null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      el.traverse(setIncrementalAndHoverLayer);\n    }\n  },\n\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop,\n\n  /**\n   * @override\n   */\n  filterForExposedEvent: function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n\n    while ((targetEl = targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n});\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    el.__customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    el = new Clz();\n  }\n\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\n\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot) {\n  var transitionProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (transitionProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (transitionProps.position = elOption.position.slice());\n  elOption.scale && (transitionProps.scale = elOption.scale.slice());\n  elOption.origin && (transitionProps.origin = elOption.origin.slice());\n  elOption.rotation && (transitionProps.rotation = elOption.rotation);\n\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n\n  if (isInit) {\n    el.attr(transitionProps);\n  } else {\n    graphicUtil.updateProps(el, transitionProps, animatableModel, dataIndex);\n  } // Merge by default.\n  // z2 must not be null/undefined, otherwise sort error may occur.\n\n\n  elOption.hasOwnProperty('z2') && el.attr('z2', elOption.z2 || 0);\n  elOption.hasOwnProperty('silent') && el.attr('silent', elOption.silent);\n  elOption.hasOwnProperty('invisible') && el.attr('invisible', elOption.invisible);\n  elOption.hasOwnProperty('ignore') && el.attr('ignore', elOption.ignore); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  elOption.hasOwnProperty('info') && el.attr('info', elOption.info); // If `elOption.styleEmphasis` is `false`, remove hover style. The\n  // logic is ensured by `graphicUtil.setElementHoverStyle`.\n\n  var styleEmphasis = elOption.styleEmphasis; // hoverStyle should always be set here, because if the hover style\n  // may already be changed, where the inner cache should be reset.\n\n  graphicUtil.setElementHoverStyle(el, styleEmphasis);\n\n  if (isRoot) {\n    graphicUtil.setAsHighDownDispatcher(el, styleEmphasis !== false);\n  }\n}\n\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currVisualColor;\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n    var labelModel = extra ? applyExtraBefore(extra, currLabelNormalModel) : currLabelNormalModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      autoColor: currVisualColor,\n      isRectText: true\n    });\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n    var labelModel = extra ? applyExtraBefore(extra, currLabelEmphasisModel) : currLabelEmphasisModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      isRectText: true\n    }, true);\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barMinWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, true);\n  el && data.setItemGraphicEl(dataIndex, el);\n  return el;\n}\n\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, isRoot) {\n  // [Rule]\n  // By default, follow merge mode.\n  //     (It probably brings benifit for performance in some cases of large data, where\n  //     user program can be optimized to that only updated props needed to be re-calculated,\n  //     or according to `actionType` some calculation can be skipped.)\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  var simplyRemove = !elOption; // `null`/`undefined`/`false`\n\n  elOption = elOption || {};\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n\n  if (el && (simplyRemove // || elOption.$merge === false\n  // If `elOptionType` is `null`, follow the merge principle.\n  || elOptionType != null && elOptionType !== el.__customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== el.__customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== el.__customImagePath // FIXME test and remove this restriction?\n  || elOptionType === 'text' && hasOwn(elOptionShape, 'text') && elOptionStyle.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n\n  if (simplyRemove) {\n    return;\n  }\n\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot);\n\n  if (elOptionType === 'group') {\n    mergeChildren(el, dataIndex, elOption, animatableModel, data);\n  } // Always add whatever already added to ensure sequence.\n\n\n  group.add(el);\n  return el;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true` or replace\n// it by another element, where its `$merge` can be set as `true` if necessary.\n\n\nfunction mergeChildren(el, dataIndex, elOption, animatableModel, data) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      animatableModel: animatableModel,\n      group: el,\n      data: data\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n  }\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n} // `graphic#applyDefaultTextStyle` will cache\n// textFill, textStroke, textStrokeWidth.\n// We have to do this trick.\n\n\nfunction applyExtraBefore(extra, model) {\n  var dummyModel = new Model({}, model);\n  zrUtil.each(CACHED_LABEL_STYLE_PROPERTIES, function (stylePropName, modelPropName) {\n    if (extra.hasOwnProperty(stylePropName)) {\n      dummyModel.option[modelPropName] = extra[stylePropName];\n    }\n  });\n  return dummyModel;\n}\n\nfunction applyExtraAfter(itemStyle, extra) {\n  for (var key in extra) {\n    if (extra.hasOwnProperty(key) || !CACHED_LABEL_STYLE_PROPERTIES.hasOwnProperty(key)) {\n      itemStyle[key] = extra[key];\n    }\n  }\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (shape.hasOwnProperty('pathData') || shape.hasOwnProperty('d'));\n}\n\nfunction hasOwn(host, prop) {\n  return host && host.hasOwnProperty(prop);\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}