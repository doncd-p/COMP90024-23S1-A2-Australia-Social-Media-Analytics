{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\nvar echarts = require(\"../../echarts\");\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar nodeOpacityPath = ['itemStyle', 'opacity'];\nvar hoverNodeOpacityPath = ['emphasis', 'itemStyle', 'opacity'];\nvar lineOpacityPath = ['lineStyle', 'opacity'];\nvar hoverLineOpacityPath = ['emphasis', 'lineStyle', 'opacity'];\nfunction getItemOpacity(item, opacityPath) {\n  return item.getVisual('opacity') || item.getModel().get(opacityPath);\n}\nfunction fadeOutItem(item, opacityPath, opacityRatio) {\n  var el = item.getGraphicEl();\n  var opacity = getItemOpacity(item, opacityPath);\n  if (opacityRatio != null) {\n    opacity == null && (opacity = 1);\n    opacity *= opacityRatio;\n  }\n  el.downplay && el.downplay();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\nfunction fadeInItem(item, opacityPath) {\n  var opacity = getItemOpacity(item, opacityPath);\n  var el = item.getGraphicEl();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  }); // Support emphasis here.\n\n  el.highlight && el.highlight();\n}\nvar SankeyShape = graphic.extendShape({\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    cpx2: 0,\n    cpy2: 0,\n    extent: 0,\n    orient: ''\n  },\n  buildPath: function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  },\n  highlight: function () {\n    this.trigger('emphasis');\n  },\n  downplay: function () {\n    this.trigger('normal');\n  }\n});\nvar _default = echarts.extendChartView({\n  type: 'sankey',\n  /**\n   * @private\n   * @type {module:echarts/chart/sankey/SankeySeries}\n   */\n  _model: null,\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _focusAdjacencyDisabled: false,\n  render: function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.attr('position', [layoutInfo.x, layoutInfo.y]); // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyShape();\n      curve.dataIndex = edge.dataIndex;\n      curve.seriesIndex = seriesModel.seriesIndex;\n      curve.dataType = 'edge';\n      var lineStyleModel = edge.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.setStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          break;\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          break;\n      }\n      graphic.setHoverStyle(curve, edge.getModel('emphasis.lineStyle').getItemStyle());\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var labelModel = itemModel.getModel('label');\n      var labelHoverModel = itemModel.getModel('emphasis.label');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle()\n      });\n      var hoverStyle = node.getModel('emphasis.itemStyle').getItemStyle();\n      graphic.setLabelStyle(rect.style, hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id,\n        isRectText: true\n      });\n      rect.setStyle('fill', node.getVisual('color'));\n      graphic.setHoverStyle(rect, hoverStyle);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      rect.dataType = 'node';\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n      el.highlight = function () {\n        this.trigger('emphasis');\n      };\n      el.downplay = function () {\n        this.trigger('normal');\n      };\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n      if (itemModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              dataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n    edgeData.eachItemGraphicEl(function (el, dataIndex) {\n      var edgeModel = edgeData.getItemModel(dataIndex);\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n      if (edgeModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              edgeDataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n    if (!this._data && seriesModel.get('animation')) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  },\n  dispose: function () {\n    this._clearTimer();\n  },\n  _dispatchUnfocus: function (api) {\n    var self = this;\n    this._clearTimer();\n    this._unfocusDelayTimer = setTimeout(function () {\n      self._unfocusDelayTimer = null;\n      api.dispatchAction({\n        type: 'unfocusNodeAdjacency',\n        seriesId: self._model.id\n      });\n    }, 500);\n  },\n  _clearTimer: function () {\n    if (this._unfocusDelayTimer) {\n      clearTimeout(this._unfocusDelayTimer);\n      this._unfocusDelayTimer = null;\n    }\n  },\n  focusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var graph = data.graph;\n    var dataIndex = payload.dataIndex;\n    var itemModel = data.getItemModel(dataIndex);\n    var edgeDataIndex = payload.edgeDataIndex;\n    if (dataIndex == null && edgeDataIndex == null) {\n      return;\n    }\n    var node = graph.getNodeByIndex(dataIndex);\n    var edge = graph.getEdgeByIndex(edgeDataIndex);\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath, 0.1);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath, 0.1);\n    });\n    if (node) {\n      fadeInItem(node, hoverNodeOpacityPath);\n      var focusNodeAdj = itemModel.get('focusNodeAdjacency');\n      if (focusNodeAdj === 'outEdges') {\n        zrUtil.each(node.outEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'inEdges') {\n        zrUtil.each(node.inEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node1, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'allEdges') {\n        zrUtil.each(node.edges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n          fadeInItem(edge, hoverLineOpacityPath);\n          edge.node1 !== node && fadeInItem(edge.node1, hoverNodeOpacityPath);\n          edge.node2 !== node && fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      }\n    }\n    if (edge) {\n      fadeInItem(edge, hoverLineOpacityPath);\n      fadeInItem(edge.node1, hoverNodeOpacityPath);\n      fadeInItem(edge.node2, hoverNodeOpacityPath);\n    }\n  },\n  unfocusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var graph = seriesModel.getGraph();\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath);\n    });\n  }\n}); // Add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nmodule.exports = _default;","map":{"version":3,"names":["graphic","require","echarts","zrUtil","nodeOpacityPath","hoverNodeOpacityPath","lineOpacityPath","hoverLineOpacityPath","getItemOpacity","item","opacityPath","getVisual","getModel","get","fadeOutItem","opacityRatio","el","getGraphicEl","opacity","downplay","traverse","child","type","setStyle","fadeInItem","highlight","SankeyShape","extendShape","shape","x1","y1","x2","y2","cpx1","cpy1","cpx2","cpy2","extent","orient","buildPath","ctx","moveTo","bezierCurveTo","lineTo","closePath","trigger","_default","extendChartView","_model","_focusAdjacencyDisabled","render","seriesModel","ecModel","api","sankeyView","graph","getGraph","group","layoutInfo","width","height","nodeData","getData","edgeData","removeAll","attr","x","y","eachEdge","edge","curve","dataIndex","seriesIndex","dataType","lineStyleModel","curvature","n1Layout","node1","getLayout","node1Model","dragX1","dragY1","n2Layout","node2","node2Model","dragX2","dragY2","edgeLayout","Math","max","dy","sy","ty","dx","setShape","getItemStyle","style","fill","setHoverStyle","add","setItemGraphicEl","eachNode","node","layout","itemModel","dragX","dragY","labelModel","labelHoverModel","rect","Rect","hoverStyle","setLabelStyle","labelFetcher","labelDataIndex","defaultText","id","isRectText","eachItemGraphicEl","getItemModel","drift","dirty","dispatchAction","seriesId","getRawIndex","localX","localY","ondragend","draggable","cursor","focusNodeAdjHandler","off","unfocusNodeAdjHandler","on","_clearTimer","_dispatchUnfocus","edgeModel","edgeDataIndex","_data","setClipPath","createGridClipShape","getBoundingRect","removeClipPath","dispose","self","_unfocusDelayTimer","setTimeout","clearTimeout","focusNodeAdjacency","payload","data","getNodeByIndex","getEdgeByIndex","focusNodeAdj","each","outEdges","inEdges","edges","unfocusNodeAdjacency","cb","rectEl","initProps","module","exports"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc_assign2/node_modules/echarts/lib/chart/sankey/SankeyView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar nodeOpacityPath = ['itemStyle', 'opacity'];\nvar hoverNodeOpacityPath = ['emphasis', 'itemStyle', 'opacity'];\nvar lineOpacityPath = ['lineStyle', 'opacity'];\nvar hoverLineOpacityPath = ['emphasis', 'lineStyle', 'opacity'];\n\nfunction getItemOpacity(item, opacityPath) {\n  return item.getVisual('opacity') || item.getModel().get(opacityPath);\n}\n\nfunction fadeOutItem(item, opacityPath, opacityRatio) {\n  var el = item.getGraphicEl();\n  var opacity = getItemOpacity(item, opacityPath);\n\n  if (opacityRatio != null) {\n    opacity == null && (opacity = 1);\n    opacity *= opacityRatio;\n  }\n\n  el.downplay && el.downplay();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\n\nfunction fadeInItem(item, opacityPath) {\n  var opacity = getItemOpacity(item, opacityPath);\n  var el = item.getGraphicEl();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  }); // Support emphasis here.\n\n  el.highlight && el.highlight();\n}\n\nvar SankeyShape = graphic.extendShape({\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    cpx2: 0,\n    cpy2: 0,\n    extent: 0,\n    orient: ''\n  },\n  buildPath: function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  },\n  highlight: function () {\n    this.trigger('emphasis');\n  },\n  downplay: function () {\n    this.trigger('normal');\n  }\n});\n\nvar _default = echarts.extendChartView({\n  type: 'sankey',\n\n  /**\n   * @private\n   * @type {module:echarts/chart/sankey/SankeySeries}\n   */\n  _model: null,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _focusAdjacencyDisabled: false,\n  render: function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.attr('position', [layoutInfo.x, layoutInfo.y]); // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyShape();\n      curve.dataIndex = edge.dataIndex;\n      curve.seriesIndex = seriesModel.seriesIndex;\n      curve.dataType = 'edge';\n      var lineStyleModel = edge.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.setStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          break;\n      }\n\n      graphic.setHoverStyle(curve, edge.getModel('emphasis.lineStyle').getItemStyle());\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var labelModel = itemModel.getModel('label');\n      var labelHoverModel = itemModel.getModel('emphasis.label');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle()\n      });\n      var hoverStyle = node.getModel('emphasis.itemStyle').getItemStyle();\n      graphic.setLabelStyle(rect.style, hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id,\n        isRectText: true\n      });\n      rect.setStyle('fill', node.getVisual('color'));\n      graphic.setHoverStyle(rect, hoverStyle);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      rect.dataType = 'node';\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n\n      el.highlight = function () {\n        this.trigger('emphasis');\n      };\n\n      el.downplay = function () {\n        this.trigger('normal');\n      };\n\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (itemModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              dataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n    edgeData.eachItemGraphicEl(function (el, dataIndex) {\n      var edgeModel = edgeData.getItemModel(dataIndex);\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (edgeModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              edgeDataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n\n    if (!this._data && seriesModel.get('animation')) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  },\n  dispose: function () {\n    this._clearTimer();\n  },\n  _dispatchUnfocus: function (api) {\n    var self = this;\n\n    this._clearTimer();\n\n    this._unfocusDelayTimer = setTimeout(function () {\n      self._unfocusDelayTimer = null;\n      api.dispatchAction({\n        type: 'unfocusNodeAdjacency',\n        seriesId: self._model.id\n      });\n    }, 500);\n  },\n  _clearTimer: function () {\n    if (this._unfocusDelayTimer) {\n      clearTimeout(this._unfocusDelayTimer);\n      this._unfocusDelayTimer = null;\n    }\n  },\n  focusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var graph = data.graph;\n    var dataIndex = payload.dataIndex;\n    var itemModel = data.getItemModel(dataIndex);\n    var edgeDataIndex = payload.edgeDataIndex;\n\n    if (dataIndex == null && edgeDataIndex == null) {\n      return;\n    }\n\n    var node = graph.getNodeByIndex(dataIndex);\n    var edge = graph.getEdgeByIndex(edgeDataIndex);\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath, 0.1);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath, 0.1);\n    });\n\n    if (node) {\n      fadeInItem(node, hoverNodeOpacityPath);\n      var focusNodeAdj = itemModel.get('focusNodeAdjacency');\n\n      if (focusNodeAdj === 'outEdges') {\n        zrUtil.each(node.outEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'inEdges') {\n        zrUtil.each(node.inEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node1, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'allEdges') {\n        zrUtil.each(node.edges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          edge.node1 !== node && fadeInItem(edge.node1, hoverNodeOpacityPath);\n          edge.node2 !== node && fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      }\n    }\n\n    if (edge) {\n      fadeInItem(edge, hoverLineOpacityPath);\n      fadeInItem(edge.node1, hoverNodeOpacityPath);\n      fadeInItem(edge.node2, hoverNodeOpacityPath);\n    }\n  },\n  unfocusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var graph = seriesModel.getGraph();\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath);\n    });\n  }\n}); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}