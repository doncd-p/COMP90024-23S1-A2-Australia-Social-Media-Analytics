{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _traversalHelper = require(\"./traversalHelper\");\nvar eachAfter = _traversalHelper.eachAfter;\nvar eachBefore = _traversalHelper.eachBefore;\nvar _layoutHelper = require(\"./layoutHelper\");\nvar init = _layoutHelper.init;\nvar firstWalk = _layoutHelper.firstWalk;\nvar secondWalk = _layoutHelper.secondWalk;\nvar sep = _layoutHelper.separation;\nvar radialCoordinate = _layoutHelper.radialCoordinate;\nvar getViewRect = _layoutHelper.getViewRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left = realRoot;\n    var right = realRoot;\n    var bottom = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n      if (x < left.getLayout().x) {\n        left = node;\n      }\n      if (x > right.getLayout().x) {\n        right = node;\n      }\n      if (node.depth > bottom.depth) {\n        bottom = node;\n      }\n    });\n    var delta = left === right ? 1 : separation(left, right) / 2;\n    var tx = delta - left.getLayout().x;\n    var kx = 0;\n    var ky = 0;\n    var coorX = 0;\n    var coorY = 0;\n    if (layout === 'radial') {\n      kx = width / (right.getLayout().x + delta + tx); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky = height / (bottom.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX = (node.getLayout().x + tx) * kx;\n        coorY = (node.depth - 1) * ky;\n        var finalCoor = radialCoordinate(coorX, coorY);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX,\n          rawY: coorY\n        }, true);\n      });\n    } else {\n      var orient = seriesModel.getOrient();\n      if (orient === 'RL' || orient === 'LR') {\n        ky = height / (right.getLayout().x + delta + tx);\n        kx = width / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY = (node.getLayout().x + tx) * ky;\n          coorX = orient === 'LR' ? (node.depth - 1) * kx : width - (node.depth - 1) * kx;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      } else if (orient === 'TB' || orient === 'BT') {\n        kx = width / (right.getLayout().x + delta + tx);\n        ky = height / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX = (node.getLayout().x + tx) * kx;\n          coorY = orient === 'TB' ? (node.depth - 1) * ky : height - (node.depth - 1) * ky;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      }\n    }\n  }\n}\nmodule.exports = _default;","map":{"version":3,"names":["_traversalHelper","require","eachAfter","eachBefore","_layoutHelper","init","firstWalk","secondWalk","sep","separation","radialCoordinate","getViewRect","_default","ecModel","api","eachSeriesByType","seriesModel","commonLayout","layoutInfo","layout","get","width","height","Math","PI","min","node1","node2","parentNode","depth","virtualRoot","getData","tree","root","realRoot","children","hierNode","modifier","prelim","left","right","bottom","node","x","getLayout","delta","tx","kx","ky","coorX","coorY","finalCoor","setLayout","y","rawX","rawY","orient","getOrient","module","exports"],"sources":["/Users/zoyazhou/workspace/vscodeProjects/ccc/COMP90024-23S1-A2-Australia-Social-Media-Analytics/src/frontend/node_modules/echarts/lib/chart/tree/treeLayout.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _traversalHelper = require(\"./traversalHelper\");\n\nvar eachAfter = _traversalHelper.eachAfter;\nvar eachBefore = _traversalHelper.eachBefore;\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar init = _layoutHelper.init;\nvar firstWalk = _layoutHelper.firstWalk;\nvar secondWalk = _layoutHelper.secondWalk;\nvar sep = _layoutHelper.separation;\nvar radialCoordinate = _layoutHelper.radialCoordinate;\nvar getViewRect = _layoutHelper.getViewRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left = realRoot;\n    var right = realRoot;\n    var bottom = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left.getLayout().x) {\n        left = node;\n      }\n\n      if (x > right.getLayout().x) {\n        right = node;\n      }\n\n      if (node.depth > bottom.depth) {\n        bottom = node;\n      }\n    });\n    var delta = left === right ? 1 : separation(left, right) / 2;\n    var tx = delta - left.getLayout().x;\n    var kx = 0;\n    var ky = 0;\n    var coorX = 0;\n    var coorY = 0;\n\n    if (layout === 'radial') {\n      kx = width / (right.getLayout().x + delta + tx); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky = height / (bottom.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX = (node.getLayout().x + tx) * kx;\n        coorY = (node.depth - 1) * ky;\n        var finalCoor = radialCoordinate(coorX, coorY);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX,\n          rawY: coorY\n        }, true);\n      });\n    } else {\n      var orient = seriesModel.getOrient();\n\n      if (orient === 'RL' || orient === 'LR') {\n        ky = height / (right.getLayout().x + delta + tx);\n        kx = width / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY = (node.getLayout().x + tx) * ky;\n          coorX = orient === 'LR' ? (node.depth - 1) * kx : width - (node.depth - 1) * kx;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      } else if (orient === 'TB' || orient === 'BT') {\n        kx = width / (right.getLayout().x + delta + tx);\n        ky = height / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX = (node.getLayout().x + tx) * kx;\n          coorY = orient === 'TB' ? (node.depth - 1) * ky : height - (node.depth - 1) * ky;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      }\n    }\n  }\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}